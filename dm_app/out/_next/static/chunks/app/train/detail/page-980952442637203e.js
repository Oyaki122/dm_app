(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[927],{1266:function(n,i,t){Promise.resolve().then(t.bind(t,3763))},6327:function(n,i,t){"use strict";t.d(i,{A7:function(){return c},EO:function(){return v},JE:function(){return h}});var r=t(9268),e=t(1822),l=t(6840),o=t(6720),a=t(4873),d=t(728),s=t(3862),u=t(157);function c(n){let{element:i}=n;return(0,r.jsx)(e.Tr,{children:i.map((n,i)=>(0,r.jsx)(l.Td,{children:n},i))})}function v(n){let{element:i}=n;return(0,r.jsx)(e.Tr,{children:i.map((n,i)=>(0,r.jsx)(l.Td,{children:n},i))})}function h(n){let{indexes:i,children:t}=n;return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(o.x,{children:(0,r.jsxs)(a.i,{variant:"simple",colorScheme:"gray",children:[(0,r.jsx)(d.h,{children:(0,r.jsx)(e.Tr,{children:i.map((n,i)=>(0,r.jsx)(s.Th,{children:n},i))})}),(0,r.jsx)(u.p,{children:t})]})})})}t(6006)},9360:function(n,i,t){"use strict";t.d(i,{_:function(){return r}});let r=n=>async(i,t)=>{let r={};r=void 0===t?{credentials:"include"}:{...t,credentials:"include"};let e=await fetch(i,r),l=await e.json();return n.parse(l)}},6196:function(n,i,t){"use strict";t.d(i,{x:function(){return e}});var r=t(2391);let e=r.z.object({range:r.z.array(r.z.object({train_id:r.z.number(),conductor_id:r.z.number(),driver_id:r.z.number(),station_id:r.z.number()}))})},4194:function(n,i,t){"use strict";t.d(i,{H:function(){return e}});var r=t(2391);let e=r.z.object({drivers:r.z.array(r.z.object({driver_id:r.z.number().positive().int(),name:r.z.string(),affilitation:r.z.string()}))})},2503:function(n,i,t){"use strict";t.d(i,{y:function(){return e}});var r=t(2391);let e=r.z.object({stations:r.z.array(r.z.object({station_id:r.z.number().positive().int(),name:r.z.string(),city:r.z.string(),line:r.z.string()}))})},4948:function(n,i,t){"use strict";t.d(i,{s:function(){return l}});var r=t(2391);let e=r.z.custom(n=>{if("number"!=typeof n)return!1;let i=n/100,t=n%100;return!(i<0)&&!(i>24)&&!(t<0)&&!(t>59)}),l=r.z.object({stops:r.z.array(r.z.object({train_id:r.z.number(),station_id:r.z.number(),arrival_time:e.nullish(),departure_time:e.nullish()}))})},8301:function(n,i,t){"use strict";t.d(i,{v:function(){return e}});var r=t(2391);let e=r.z.object({train:r.z.object({train_id:r.z.number(),origin:r.z.number(),destinaion:r.z.number(),car:r.z.number()})})},3763:function(n,i,t){"use strict";t.r(i),t.d(i,{default:function(){return T}});var r=t(9268),e=t(8301),l=t(2503),o=t(6196),a=t(4194),d=t(4948),s=t(8823),u=t(1060),c=t(5559),v=t(1283),h=t(673),x=t(2127),m=t(160),f=t(2344),j=t(4658),_=t(2261),p=t(7400),z=t(9360),g=t(730),b=t(6327),y=t(5846),w=t.n(y);function T(){var n,i,t,y,T,E,P;let N={slug:""};N.slug=null!==(t=new URLSearchParams(new URL(window.location.href).search).get("slug"))&&void 0!==t?t:"";let{data:O,error:k}=(0,g.ZP)("http://localhost:5000/api/train_detail/"+N.slug,(0,z._)(e.v)),{data:S,error:Z}=(0,g.ZP)("http://localhost:5000/api/get_stations",(0,z._)(l.y)),A=null==S?void 0:S.stations,L={num:null==O?void 0:O.train.train_id,destination:null!==(y=null==A?void 0:null===(n=A.find(n=>n.station_id===(null==O?void 0:O.train.destinaion)))||void 0===n?void 0:n.name)&&void 0!==y?y:"",origin:null!==(T=null==A?void 0:null===(i=A.find(n=>n.station_id===(null==O?void 0:O.train.origin)))||void 0===i?void 0:i.name)&&void 0!==T?T:""},{data:J,error:R}=(0,g.ZP)("http://localhost:5000/api/get_drivers",(0,z._)(a.H)),U=null==J?void 0:J.drivers,{data:C,error:F}=(0,g.ZP)("http://localhost:5000/api/crewRange/".concat(null==O?void 0:O.train.train_id),(0,z._)(o.x)),H=null==C?void 0:C.range.map((n,i)=>{var t,r,e,l;return{station:null!==(e=null==A?void 0:null===(t=A.find(i=>i.station_id===n.station_id))||void 0===t?void 0:t.name)&&void 0!==e?e:"",driver:null!==(l=null==U?void 0:null===(r=U.find(i=>i.driver_id===n.driver_id))||void 0===r?void 0:r.name)&&void 0!==l?l:""}}),{data:q,error:D}=(0,g.ZP)("http://localhost:5000/api/stops/".concat(null==O?void 0:O.train.train_id),(0,z._)(d.s)),G=null==q?void 0:q.stops.map((n,i)=>{var t,r;return{station:null!==(r=null==A?void 0:null===(t=A.find(i=>i.station_id===n.station_id))||void 0===t?void 0:t.name)&&void 0!==r?r:"",arrival:n.arrival_time,departure:n.departure_time}});return console.log(k,Z,R,F,D),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(s.U,{p:"1rem",spacing:"1rem",children:[(0,r.jsx)(u.xu,{p:"1rem",children:(0,r.jsxs)(c.X,{as:"h3",size:"md",children:["列車番号: ",null==O?void 0:O.train.train_id]})}),(0,r.jsxs)(u.xu,{p:"1rem",children:[(0,r.jsxs)(v.x,{children:["出発: ",L.origin]}),(0,r.jsxs)(v.x,{children:["到着: ",L.destination]})]}),(0,r.jsx)(h.L,{}),(0,r.jsx)(u.xu,{children:(0,r.jsx)(w(),{href:"/train/edit?slug=".concat(null==O?void 0:O.train.train_id),children:(0,r.jsx)(x.z,{colorScheme:"green",children:"編集"})})})]}),(0,r.jsx)(u.xu,{p:"1rem",children:(0,r.jsxs)(m.m,{children:[(0,r.jsxs)(f.t,{children:[(0,r.jsx)(j.O,{children:"停車駅"}),(0,r.jsx)(j.O,{children:"乗務員"})]}),(0,r.jsxs)(_.n,{children:[(0,r.jsx)(p.x,{children:(0,r.jsx)(b.JE,{indexes:["駅","到着時間","出発時間"],children:null==G?void 0:G.map((n,i)=>{var t,e;return(0,r.jsx)(b.A7,{element:[n.station,null!==(E=null===(t=n.arrival)||void 0===t?void 0:t.toString())&&void 0!==E?E:"-",null!==(P=null===(e=n.departure)||void 0===e?void 0:e.toString())&&void 0!==P?P:"-"]},i)})})}),(0,r.jsx)(p.x,{children:(0,r.jsx)(b.JE,{indexes:["駅","運転手"],children:null==H?void 0:H.map((n,i)=>(0,r.jsx)(b.A7,{element:[n.station,n.driver]},i))})})]})]})})]})}},1283:function(n,i,t){"use strict";t.d(i,{x:function(){return u}});var r=t(8710),e=t(5526),l=t(2424),o=t(2088),a=t(463),d=t(7873),s=t(9268),u=(0,r.G)(function(n,i){let t=(0,e.mq)("Text",n),{className:r,align:u,decoration:c,casing:v,...h}=(0,l.Lr)(n),x=(0,d.o)({textAlign:n.align,textDecoration:n.decoration,textTransform:n.casing});return(0,s.jsx)(o.m.p,{ref:i,className:(0,a.cx)("chakra-text",n.className),...x,...h,__css:t})});u.displayName="Text"},7873:function(n,i,t){"use strict";function r(n){let i=Object.assign({},n);for(let n in i)void 0===i[n]&&delete i[n];return i}t.d(i,{o:function(){return r}})}},function(n){n.O(0,[559,845,782,787,253,961,744],function(){return n(n.s=1266)}),_N_E=n.O()}]);